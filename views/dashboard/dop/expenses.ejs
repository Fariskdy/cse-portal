<%- include('./layouts/header') %>



<div class="main">

        <div class="topbar">
            <div class="toggle">
                <ion-icon name="menu-outline"></ion-icon>
                
            </div>
            <div class="button-group">
             <!-- <button> <a href="/dop/expenses-data">My Expenses</a></button>-->
              <button> <a href="/dop/pre-expenses">Previous Month</a></button>
              
            </div>
            <div class="user">
              <img src="/assets/images/user.png" alt="User Image">
              <div class="dropdown">
                <div class="dropdown-header">
                  <h3><%= user.name %></h3>
                  <p>DOP</p>
                </div>
                <div class="dropdown-links">
                  <a href="/user/profile"><ion-icon name="person-circle-outline"></ion-icon> &nbsp; Profile</a>
                  <a href="/dop/settings"><ion-icon name="settings-outline"></ion-icon> &nbsp; Settings</a>
                </div>
                <div class="dropdown-footer">
                  <a href="/auth/logout">Logout</a>
                </div>
              </div>
            </div>

            
        </div>
        <div class="container">
        <h1 class="section-header">Verify Expenses - <%= new Date().toLocaleString('default', { month: 'long', year: 'numeric' }) %></h1>
        <div class="cardcontent">
          <% expensesByRegion.forEach(region => {const unverifiedCount = region.expenses.reduce((count, expense) => expense.verifiedByDop ? count : count + 1, 0); %>
            <% if (region.expenses.length > 0) { %>
              <div class="card">
                <div class="card-caption"><%= new Date().toLocaleString('default', { month: 'long', year: 'numeric' }) %></div>
                <div class="card-heading"><%= region._id %></div>
                <% if (unverifiedCount === 0) { %>
                  <div class="card-verified-count"><img src="/assets/images/approved.png" alt="" srcset=""></div>
                <% } else { %>
                <div class="card-unverified-count">
                  <%= unverifiedCount %>
                </div>
                <% } %>
                
                <div class="card-footer">
                  <div class="card-footer-content">
                    <a href="/dop/expenses/<%= region._id %>">View Expenses</a>
                  </div>
                </div>
              </div>
            <% } %>
          <% }) %>
        </div>
        
    </div>
      
          
        
   


    </div>



    <%- include('./layouts/footer') %>